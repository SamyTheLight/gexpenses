
:toc: left 

= Proyecto GExpenses

== Introduccion

Este proyecto está elaborado por Joan Canals, Oscar Ramírez y Samuel García. El propósito central de nuestro proyecto es el desarrollo de una página web para gestionar las cuentas de un grupo de personas al realizar un viaje.

La página web  se llamará “GExpenses” y funcionará de la siguiente manera: primeramente, un usuario deberá crear una actividad, después deberá añadir a los integrantes correspondientes y finalmente introducirá los gastos de cada persona.

Para una buena navegación por la página web, se intentará crear un diseño cómodo, agradable y fácil de entender para todos usuarios que se conecten mediante una pantalla de ordenador convencional o un dispositivo móvil.

= Manual de instalación

= Manual de usuario

== Acceso a nuestro sitio web

Para acceder a nuestro sitio web, primeramente, el usuario debe crear una cuenta en nuestro formulario de registro. Una vez registrado, debe introducir sus credenciales en el formulario de login.

== Uso de nuestro sitio web

=== Creacion de actividad

Ordenacion actividades.

Detalle actividad
    - Añadir gasto
    - Balance

=== Invitaciones

Enviar invitación.


=== Pagos

registrar pago.
repartir pago.

= Guia de estilo

== Paleta de colores

image::imagesmemoria/paletaColores.jpg[]

Hemos elegido el azul como color principal, ya que hace un contraste que nos recuerda al cielo o al mar. Así como que transmite naturaleza y pureza.Creemos que un color así le dará un buen contraste según qué botones.

Por otro lado, elegimos el azul oscuro y el negro para así dar un toque de elegáncia y refinez.

Por último, elegimos el blanco para hacer un contraste y poder jugar con los colores más oscuros así como para poder aplicarlo en la letra.

== Texto

image::Texto1.jpg[]

image::Texto2.jpg[]

==Logo

image::Logo1.jpg[]

image::Logo2.jpg[]

== Botones

image::botones1.jpg[]

== Iconos

image::iconos1.jpg[]

== Pantallas

En este apartado mostraremos todos los diseños de las pantallas de nuestra aplicación.

.Tipo de pantallas:
[NOTE]
====
Cada pantalla tendrá sus respectivos apartados, tanto scketching, wireframe y mockup.

. Pantalla de login y registro.

. Pantalla Home y formulario.

====

En el siguiente enlace se muestran las pantallas: https://www.figma.com/file/F0jCsQDcN4v49yFDbC4XKK/GExpenses?node-id=0%3A1&t=Jf8ytj5PvDdSPTxb-1[Enlace de pantallas].

= Base de datos

== Diseño

Al diseñar la base de datos, hemos echo uso del lenguaje MySQL Workbench para crear las tablas y variables necesarias para que nuestra aplicación funcione.

las tablas principales que corresponden en nuestra base de datos son la tabla 'usuario', la tabla 'activitat' y la tabla 'invitacio' como se muestra en la siguiente imagen:

image::GExpensesBBDD.jpg[]

v2

image::GExpensesBBDD2.jpg[]

= Encriptar contraseña

La estratégia que hemos usado para encriptar la contraseña ha sido la siguiente:

	$hash_password= password_hash($password,PASSWORD_DEFAULT);
 
	$consulta->bindParam(':contrasena', $hash_password);
    
   $hash_passwordLogin = password_hash($passwordL,PASSWORD_DEFAULT);
   
   if (password_verify($passwordL,$user['contrasena'])) {
   	$_SESSION['usuario'] = $user['nombre'];
   	header("location: PHP/Home.php");
   } else {
   	echo '
    	<script>
        	alert("Usuario no existe,por favor verifique los datos introducidos");
        	window.location = "../GExpenses.php";
    	</script>
        	';
	}

= Vagrant

Vagrant es una herramienta que nos permite crear y configurar entornos de desarrollo virtualizados que se pueden ejecutar y compartir de forma sencilla.

Por ello, nosotros hemos decidido crear un entorno Vagrant para configurar y compartir nuestra página web.

Para crear este entorno Vagrant, primeramente es necesario descargarse la herramienta en la página oficial:

https://developer.hashicorp.com/vagrant/downloads[Install Vagrant]

Una vez instalado, accedemos a nuestra area de trabajo y allí, ejecutamos un comando para instalar nuestro entorno. En nuestro caso. elegimos una maquina virtual Ubuntu:

    vagrant init ubuntu/bionic64
    vagrant up

Una vez generado nuestro entorno Vagrant, se generará un archivo Vagrantfile el cual contiene toda la informacion respecto a nuestra máquina virtual:

== Vagrantfile

    Vagrant.configure("2") do |config| 
      config.vm.box = "ubuntu/bionic64"
      config.vm.hostname = "GExpenses"
      config.vm.define "GExpenses"
      config.vm.network "private_network", ip: "172.16.0.10"
      config.vm.provision "shell", path: "script.sh"
      config.vm.provider "virtualbox" do |vb|
    	vb.name = "GExpenses44"
        vb.memory = "512"
        vb.cpus = 1
      end
    end

Para cumplir con los requisitos del Sprint 7 y crear un entorno Vagrant autoconfigurable en un entorno de producció con Apache, tuvimos que añadir la siguiente línia.

    config.vm.synced_folder "html/Code/", "/var/www/html"
    
Por lo tanto, el archivo VagrantFile quedaria de la siguiente forma:

    Vagrant.configure("2") do |config| 
      config.vm.box = "ubuntu/bionic64"
      config.vm.hostname = "GExpenses"
      config.vm.define "GExpenses"
      config.vm.synced_folder "html/Code/", "/var/www/html"
      config.vm.network "private_network", ip: "172.16.0.10" 
      config.vm.provision "shell", path: "script.sh"
      config.vm.provider "virtualbox" do |vb|
    	vb.name = "GExpenses43"
        vb.memory = "512"
        vb.cpus = 1
      end
    end

== Script.sh

Deberemos crear un archivo Script.sh para configurar los parametros de nuestro entorno Vagrant cuando se genere

    sudo apt-get update
    sudo apt-get ugrade
    
    #Instalamos la GuestAdditions
    sudo apt-get install virtualbox-guest-additions-iso
    
    #Instalamos MySql
    sudo apt-get install -y mysql-server
    sudo mysql < /vagrant/GExpensesBBDD.sql
    
    #Accedemos remotamente a la base de datos
    cp -f /vagrant/mysqld.cnf /etc/mysql/mysql.conf.d/mysqld.cnf 
    systemctl restart mysql

En el Sprint 7, para crear un entorno de Vagrant autoconfigurable en un entorno de producción, era necesario instalar Apache2 y PHP:

Apache:

    #Instalamos apache2
    sudo apt-get install apache2 -y
    sudo service apache2 restart

PHP8.1:

    #Instalamos PHP 8.1
    add-apt-repository ppa:ondrej/php
    apt-get install -y php8.1 php8.1-dev libapache2-mod-php8.1 libmcrypt-dev php8.1-mysql
    phpenmod mcrypt

En genenarl, el archivo script.sh quedaria de la siguiente forma:

    sudo apt-get update
    sudo apt-get ugrade
    #Instalamos apache2
    sudo apt-get install apache2 -y
    sudo service apache2 restart
    #Instalamos PHP 8.1
    add-apt-repository ppa:ondrej/php
    apt-get install -y php8.1 php8.1-dev libapache2-mod-php8.1 libmcrypt-dev php8.1-mysql
    phpenmod mcrypt
    #Instalamos la GuestAdditions
    #sudo apt-get install virtualbox-guest-additions-iso
    #Instalamos MySql
    sudo apt-get install -y mysql-server
    sudo mysql < /vagrant/GExpensesBBDD.sql
    #Accedemos remotamente a la base de datos
    cp -f /vagrant/mysqld.cnf /etc/mysql/mysql.conf.d/mysqld.cnf 
    systemctl restart mysql

== Conexion a la Base de Datos

Creacion de usuario:

    CREATE USER 'gexpensesuser'@'%' IDENTIFIED BY '1234';
    GRANT CREATE,ALTER,INSERT,UPDATE,SELECT,DELETE,DROP,REFERENCES, RELOAD  ON * . * TO 'gexpensesuser'@'%' WITH GRANT OPTION;
    FLUSH PRIVILEGES;

mysqld.cnf

= Glosario

== Repositorio Git

* https://git.copernic.cat/canals.ortiz.joan/gexpensesabp[Repositorio Git:]

=== Enlaces a consultar

* https://es.stackoverflow.com/questions/98329/mostrar-mensaje-de-error-en-un-span-de-un-formulario-en-javascript[Mensasje de error]