
:toc: left 

= Proyecto GExpenses

== Introduccion

La siguiente memoria se ha realizado con el propósito de hacer un seguimiento exhaustivo del trabajo realizado en el proyecto 1 de ABP. Se explicará en detalle todos los aspectos y funcionalidades que se han ido desarrollando durante los últimos 3 meses del producto, asimismo del objetivo y mejoras implementadas de éste respecto a su última entrega.

=== Objetivos y alcance del proyecto

Este proyecto está orientado a crear una página web para llevar las cuentas de un viaje y calcular cuánto dinero debe pagar cada uno y a quién.

GExpenses es una página web que ayuda a las personas a repartir los gastos que involucran una actividad entre un grupo de personas para facilitar la repartición equitativa de dinero entre ellas. En este momento, GExpenses es capaz de poder crear actividades y poder añadir adscritos a ellas, y también asignarle a los adscritos la cantidad de dinero que deben pagar por realizar la actividad en sí.

Como finalidad principal, GExpenses se encarga de gestionar los pagos de un grupo de personas al realizar una actividad a través de una interfaz que permite al usuario registrarse en nuestra página web y poder crear y visualizar las actividades, adscritos y el reparto de dinero.

GExpenses está formado por los siguientes componentes:

. Una base de datos para guardar toda la información.
. Una base de datos para guardar toda la información.
. El framework PHPUnit para realizar los testeos unitarios de los repositorios y validar la lógica de la ejecución de código.
. Un entorno de producción Vagrant.

=== Planificación del trabajo

La planificación de trabajo que se ha seguido para poder desarrollar este producto se ha dividido en varias fases.

Fase 1: análisis de los requisitos que se piden en el producto.

Fase 2: estudio de las tecnologías necesarias para desarrollar el producto. 

Fase 3: diseño del producto (sketchings, wireframes y mockups).

Fase 4: creación del entorno de trabajo Vagrant y diseño de la base de datos.

Fase 5: implementación de las funcionalidades del producto

Fase 6: pruebas y testeos unitarios.

Fase 7: elaboración de la memória y vídeo.

Teniendo en consideración que me informaron de recuperar el día 13 de abril  y que parte de requisitos del producto ya estaban en desarrollo, he calculado invertir unas 3 horas diarias para poder llegar a entregar el producto final el día 11/06/2023.

image::imagesMemoria/planificacion.png[]

Además, he creado un trello para que el profesorado pueda monitorear en todo momento las tareas que estoy realizando y las horas que he tardado en realizarlas. Este Trello lo he organizado en  7 tarjetas llamadas SPRINTS# donde se explica el trabajo por hacer de cada una. Para finalizar, he dividido el Trello en 5 apartados: PLANIFICACIÓN, BACKLOG, LISTA COSAS POR HACER, LISTA COSAS HACIENDO Y LISTA COSAS HECHAS.

image::imagesMemoria/trello.png[]

==  Seguimiento del proyecto

=== Semana 1.

Durante esta semana me he centrado en estudiar y repasar php y javascript para poder realizar el proyecto. Empecé leyendo el temario de php / javascript y empecé a estudiar el estado del producto.

=== Semana 2.

Durante esta semana he creado un Trello para empezar a organizar mi trabajo. El Trello lo he organizado en SPRINTS con colores para identificarlos más fácilmente. He empezado a analizar todas las tareas por hacer y he empezado a diseñar una nueva base de datos para guardar bien los datos de la aplicación.

image::imagesMemoria/semana_2.png[]

=== Semana 3.

Durante esta semana he acabado de definir una primera base de datos, y he creado una tabla llamada “sesion” para guardar en ésta todos los usuarios que hacen login en mi aplicación. Además, he arreglado problemas con el css como hacer fixed el footer y mostrar correctamente los botones.

image::imagesMemoria/semana_3.png[]

=== Semana 4.

Durante esta semana he refactorizado todo el código del archivo home.php, creando un repositorio ActividadRepository.php  para separar toda la lógica a la hora de insertar y visualizar una actividad del resto del código.  Además he arreglado el botón ORDENAR, sustituyéndolo por los botones ORDENAR FECHA y ORDENAR MOD. Además, he vuelto a hacer funcional el botón AÑADIR.

image::imagesMemoria/semana_4.png[]

=== Semana 5.

Esta semana la he aprovechado para acabar de organizar y arreglar todo el código de la página, creando los repositorios AdscritoRepositor.php, GastoRepository.php y InvitacionRepository.php para acabar de refactorizar todo el código encargado de añadir personas a una actividad, añadir gastos a una actividad, y insertar los adscritos de la actividad en base de datos.

image::imagesMemoria/semana_5.png[]

=== Semana 6.

Esta semana he dedicado la mayor parte del tiempo a pensar cómo hacer los repartos avanzados por importe y por proporciones. He arreglado el pago simple refactorizando el código reparto.js para calcular el tipo de reparto en función de si el usuario selecciona “Pago básico”, “Pago avanzado por importes” o “Pago avanzado por proporciones”.

image::imagesMemoria/semana_6.png[]

=== Semana 7.

Esta semana la he dedicado únicamente a acabar el pago avanzado por importe y por proporciones. Asimismo, he arreglado y documentado todos los bugs que he ido encontrando al finalizar el producto. He logrado acabar los requisitos extra que se pedían en el SPRINT#8 y he elaborado la memoria final .

image::imagesMemoria/semana_7.png[]

== Manual de instalación

Para que se pueda ejecutar y probar el proyecto, hay que tener en consideración que GExpenses está subido en un entorno Vagrant y, por lo tanto, se debe tener conocimientos previos de esta herramienta. Si se tiene instalado Vagrant y VirtualBox en la máquina local, los pasos que hay que seguir para ejecutar el producto son los siguientes:

. Descargar la rama main del repositorio github: https://github.com/SamyTheLight/gexpenses[repositorio github]
y abrirlo en un editor de código.

. Toda la lógica del producto y todo el código necesario para que funcione se encuentra en la carpeta Vagrant, por lo tanto: redirigir a ruta cd/vagrant

. Una vez dentro de la carpeta Vagrant, ejecutar el comando en la terminal vagrant up

. Una vez ejecutado el comando, la máquina ya se habrá creado. Si accedemos al archivo vagrantfile, podremos ver que la máquina hace uso de una conexión privada con la siguiente ip: 172.16.0.10, si ponemos esta ip en nuestro navegador, podremos acceder a la página de login y registro.

. Una vez finalizado los pasos anteriores, faltará leer el manual de usuario para usar la aplicación.

==  Manual de usuario

En el siguiente apartado se explicará el funcionamiento de la aplicación por parte de lo que visualizará el usuario.

=== Página de registro e inicio de sesión

Al entrar en la aplicación, la primera página que podremos visualizar es el login y registro, donde el usuario podrá introducir un nombre, un correo electrónico y una contraseña. La contraseña debe cumplir los siguientes requisitos: (1)8 caracteres máximo, (2)1 letra mayúscula y 1 minúscula, (3) un carácter especial. En mi caso, suelo usar esta contraseña para testear: aA12345678*.

image::imagesMemoria/registro.png[]

Una vez registrado, solo quedará ir al apartado de login dando clic en el botón Login, e introducir el NOMBRE (no correo electrónico) y CONTRASEÑA.

image::imagesMemoria/login.png[]

=== Página home - creación de actividades 

Una vez logueado, nos redirigirá a la página Home, donde podremos ver una interfaz donde se muestran los botones AÑADIR, ORDENAR FECHA y ORDENAR MODIFICACIÓN. 

image::imagesMemoria/home_1.png[]

Si damos click en AÑADIR, nos mostrará un POP-UP donde podremos ver un formulario para añadir una actividad introduciendo el nombre, la descripción, el tipo de divisa a usar y el tipo de actividad. 

image::imagesMemoria/anadir_actividad.png[]

Rellenamos el formulario y presionamos el botón AÑADIR ACTIVIDAD

=== Página invitaciones

image::imagesMemoria/invitacion.png[]

Nos redireccionará a la página invitaciones, donde podremos asignar adscritos a la actividad que hemos creado, pudiendo añadirlos y borrarlos de forma dinámica. Le damos al botón enviar.

=== Página home - visualización de actividades 

image::imagesMemoria/home_2.png[]

Como puede apreciarse, nos ha redirigido a la página home y ahora nos muestra una carta que corresponde a la actividad creada, si ponemos nuestro cursor encima de la carta y damos al botón details.

image::imagesMemoria/detalle_actividad_1.png[]

En la página de detalles, nos mostrará por pantalla dos bloques: uno donde se visualizan los adscritos a la actividad, y otro donde se mostrarán los gastos de la actividad. Para crear un gasto, le damos al botón “Añadir gasto +”

=== Página de gastos - añadir gastos y adscritos

image::imagesMemoria/anadir_gasto.png[]

Podremos añadir un gasto poniendo un concepto, una cantidad a pagar total, el pagador (la persona que pagará toda la actividad) y los miembros (adscritos a la actividad). En este caso, el pagador será pedro y los miembros juan y jose. Damos al botón GUARDAR.

=== Página de reparto

image::imagesMemoria/reparto.png[]

Nos redirigirá a la página reparto, donde podremos elegir entre tres tipos de reparto:

- Pago básico: divide la cantidad del total a repartir entre el número de integrantes.

image::imagesMemoria/pago_basico.png[]

Se puede apreciar que el pago total es 15, pero el total a repartir es igual a 10. Esto se debe a que la lógica de reparto contempla que la persona que se ha seleccionado como pagador (en este caso, pedro) ya se ha repartido su parte proporcional del pago total, que sería en este caso 5 euros.
Entonces, a los miembros se les repartirá equitativamente el resto del pago (total a repartir).

- Pago avanzado por importes: en esta sección, el usuario tendrá la opción de introducir en los inputs de los miembros la cantidad a pagar de forma manual. Cuando se introduce el valor, se modifica el campo del total a repartir de forma dinámica.

image::imagesMemoria/pago_avanzado_importe.png[]

- Pago avanzado por proporciones: se podrá definir por proporciones el total del pago a repartir que pagará cada miembro. En los inputs de la izquierda se introduce la proporción a repartir y, en los inputs de la derecha, se muestra el valor de la proporción, siendo en este caso donde juan pagará 3,33 euros y manuel pagará 6,67 euros

image::imagesMemoria/pago_avanzado_proporciones.png[]

Damos al botón ACEPTAR en cualquiera de los 3 casos.

=== Página de detalle de actividades

Nos redirigirá de nuevo a la página detalle actividad, donde podemos ver como se muestran los conceptos del gasto creados y un sumatorio de todos los conceptos.

image::imagesMemoria/detalle_actividad_2.png[]

Damos click en Detalle gasto.

=== Página de detalle del concepto

Nos mostrará la información del concepto, quien es el pagador, y los miembros involucrados en el concepto mostrando la cantidad que van a pagar.

image::imagesMemoria/detalle_concepto.png[]

== Guía de estilos

== Base de datos

== Vagrant

== Funcionalidades de la aplicación

=== Sesion

==== SesionRepository

==== SesionRepositoryTest

=== Actividad

==== ActividadRepository

==== ActividadRepositoryTest

=== Adscritos

==== AdscritoRepository

=== Gasto

==== GastoRepository

==== GastoRepositoryTest

=== Reparto

==== RepartoRepository

==  Bugs y mejoras implementadas

=== Bugs sin arreglar

=== Bugs arreglados

=== Mejoras implementadas

=== Funcionalidades no implementadas

== Conclusión
